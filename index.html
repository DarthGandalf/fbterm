<!-- Creator     : groff version 1.22.3 -->
<!-- CreationDate: Thu May  2 17:05:35 2019 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>FbTerm</title>

</head>
<body>

<h1 align="center">FbTerm</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#SHORTCUT SUMMARY">SHORTCUT SUMMARY</a><br>
<a href="#FRAME BUFFER DEVICE">FRAME BUFFER DEVICE</a><br>
<a href="#VESA VIDEO DEVICE">VESA VIDEO DEVICE</a><br>
<a href="#FONT">FONT</a><br>
<a href="#TEXT ENCODING">TEXT ENCODING</a><br>
<a href="#BACKGROUND IMAGE">BACKGROUND IMAGE</a><br>
<a href="#256 COLOR EXTENSION">256 COLOR EXTENSION</a><br>
<a href="#INPUT METHOD">INPUT METHOD</a><br>
<a href="#SECURITY NOTES">SECURITY NOTES</a><br>
<a href="#PERFORMANCE">PERFORMANCE</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#REPORTING BUGS">REPORTING BUGS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">FbTerm - a fast
Frame Buffer based TERMinal emulator for linux</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>fbterm</b>
[<i>options</i>] [--] [<i>command</i>
[<i>arguments</i>]]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">FbTerm is a
fast terminal emulator for linux with frame buffer device or
VESA video card. Features include:</p>

<p style="margin-left:11%; margin-top: 1em">* mostly as
fast as terminal of linux kernel while accelerated scrolling
is enabled <br>
* select font with fontconfig and draw text with freetype2,
same as Qt/Gtk+ based GUI apps <br>
* dynamically create/destroy up to 10 windows initially
running default shell <br>
* record scroll-back history for every window <br>
* auto-detect current locale and convert text encoding,
support double width scripts like Chinese, Japanese etc <br>
* switch between configurable additional text encodings with
hot keys on the fly <br>
* copy/past selected text between windows with mouse when
gpm server is running <br>
* change the orientation of screen display, a.k.a. screen
rotation <br>
* lightweight input method framework with client-server
architecture <br>
* background image for eye candy</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>command</i>
[<i>arguments</i>] may be given to override the built-in
choice of shell program. Normally FbTerm checks the
<i>SHELL</i> variable. If that is not set, it tries to use
the user&rsquo;s login shell program specified in the
password file. If that is not set, /bin/sh will be used. You
should use the <i>--</i> argument to separate FbTerm&rsquo;s
options from the arguments supplied to the
<i>command</i>.</p>

<p style="margin-left:11%; margin-top: 1em">FbTerm first
uses option value specified in command line arguments, then
in the configure file <i>$HOME/.fbtermrc</i>. If that file
doesn&rsquo;t exist, FbTerm will create it with default
options on startup. <b><br>
-h, --help</b></p>

<p style="margin-left:22%;">display the help and exit</p>

<p style="margin-left:11%;"><b>-V, --version</b></p>

<p style="margin-left:22%;">display FbTerm version and
exit</p>

<p style="margin-left:11%;"><b>-v, --verbose</b></p>

<p style="margin-left:22%;">display extra FbTerm&rsquo;s
information</p>

<p style="margin-left:11%;"><b>-n,
--font-names=</b><i>text</i></p>

<p style="margin-left:22%;">specify font family names</p>

<p style="margin-left:11%;"><b>-s,
--font-size=</b><i>num</i></p>

<p style="margin-left:22%;">specify font pixel size</p>


<p style="margin-left:11%;"><b>--font-width=</b><i>num</i></p>

<p style="margin-left:22%;">force font width</p>


<p style="margin-left:11%;"><b>--font-height=</b><i>num</i></p>

<p style="margin-left:22%;">force font height</p>

<p style="margin-left:11%;"><b>-f,
--color-foreground=</b><i>num</i></p>

<p style="margin-left:22%;">specify foreground color</p>

<p style="margin-left:11%;"><b>-b,
--color-background=</b><i>num</i></p>

<p style="margin-left:22%;">specify background color</p>

<p style="margin-left:11%;"><b>-e,
--text-encodings=</b><i>text</i></p>

<p style="margin-left:22%;">specify additional text
encodings</p>

<p style="margin-left:11%;"><b>-a, --ambiguous-wide</b></p>

<p style="margin-left:22%;">treat ambiguous width
characters as wide</p>

<p style="margin-left:11%;"><b>-r,
--screen-rotate=</b><i>num</i></p>

<p style="margin-left:22%;">specify the orientation of
screen display</p>

<p style="margin-left:11%;"><b>-i,
--input-method=</b><i>text</i></p>

<p style="margin-left:22%;">specify input method
program</p>


<p style="margin-left:11%;"><b>--cursor-shape=</b><i>num</i></p>

<p style="margin-left:22%;">specify default cursor
shape</p>


<p style="margin-left:11%;"><b>--cursor-interval=</b><i>num</i></p>

<p style="margin-left:22%;">specify cursor flash
interval</p>


<p style="margin-left:11%;"><b>--vesa-mode=</b><i>num</i></p>

<p style="margin-left:22%;">specify VESA video mode</p>

<p style="margin-left:11%;"><b>--vesa-mode=list</b></p>

<p style="margin-left:22%;">display available VESA video
modes</p>

<p style="margin-left:11%;">see comments in
<i>$HOME/.fbtermrc</i> for details of these options.</p>

<h2>SHORTCUT SUMMARY
<a name="SHORTCUT SUMMARY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">keyboard: <br>
CTRL_ALT_E: exit from FbTerm <br>
CTRL_ALT_C: create a new window <br>
CTRL_ALT_D: destroy current window <br>
CTRL_ALT_1: switch to window 1 <br>
CTRL_ALT_2: switch to window 2 <br>
CTRL_ALT_3: switch to window 3 <br>
CTRL_ALT_4: switch to window 4 <br>
CTRL_ALT_5: switch to window 5 <br>
CTRL_ALT_6: switch to window 6 <br>
CTRL_ALT_7: switch to window 7 <br>
CTRL_ALT_8: switch to window 8 <br>
CTRL_ALT_9: switch to window 9 <br>
CTRL_ALT_0: switch to window 10 <br>
SHIFT_LEFT: switch to previous window <br>
SHIFT_RIGHT: switch to next window <br>
SHIFT_PAGEUP: history scroll up <br>
SHIFT_PAGEDOWN: history scroll down <br>
CTRL_ALT_F7: switch to encoding of current locale <br>
CTRL_ALT_F8 to CTRL_ALT_F12: switch to additional encodings
<br>
CTRL_SPACE: toggle input method <br>
CTRL_ALT_K: kill input method server</p>

<p style="margin-left:11%; margin-top: 1em">mouse: <br>
move when left button down: select text <br>
double click with left button: auto select text <br>
click with right button: paste selected text</p>

<p style="margin-left:11%; margin-top: 1em">Sometimes above
actions will not work, please try to redo them with shift
key holding down.</p>

<h2>FRAME BUFFER DEVICE
<a name="FRAME BUFFER DEVICE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Before
executing FbTerm, make sure there is a frame buffer device
in your system, and you have read/write access right with
it. Normally FbTerm tries to open /dev/fb0 and /dev/fb/0,
environment variable &quot;<i>FRAMEBUFFER</i>&quot; may be
used to override this built-in behavior.</p>

<h2>VESA VIDEO DEVICE
<a name="VESA VIDEO DEVICE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">From version
1.6, FbTerm adds VESA video card support. By default, FbTerm
tries frame buffer device first, if failure, then tries to
use VESA device with highest resolution and color depth.
option &quot;<i>vesa-mode</i>&quot; may be given to force
only open VESA device with the specified video mode. To see
available video modes for your VESA card, execute
&quot;<b>fbterm --vesa-mode=list</b>&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Attention: 1)
VESA support requires root privilege to work; 2) do not
force to use VESA device on the system with frame buffer
device enabled, they maybe conflict with each other.</p>

<h2>FONT
<a name="FONT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">FbTerm invokes
fontconfig to get a font list, if the first font
doesn&rsquo;t contain the glyph for the rendering character,
it will try second font, then the third, ... and so on, user
can see this ordered font list with &quot;<b>fbterm
-v</b>&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">If you
don&rsquo;t like the fonts selected by FbTerm, execute
&quot;fc-list&quot; to get available fonts, choose favorites
as the value of option &quot;<i>font-names</i>&quot;. You
may also modify the configure file of fontconfig, which will
change the behavior of all programs based on fontconfig!</p>

<h2>TEXT ENCODING
<a name="TEXT ENCODING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">By using iconv,
FbTerm converts other encodings to internal encoding UTF-8.
On startup, FbTerm checks variable <i>LC_CTYPE</i> to
determine the default text encoding, which is binded to
shortcut CTRL_ALT_F7. User can specify up to 5 additional
encodings with option &quot;<i>text-encodings</i>&quot;, for
example, as a Chinese user, you set
&quot;text-encodings=gbk,big5&quot;, shortcut CTRL_ALT_F8
will bind to gbk, and CTRL_ALT_F4 bind to big5.</p>

<p style="margin-left:11%; margin-top: 1em">In a number of
CJK encodings there are ambiguous width characters which
have a width of either narrow or wide depending on the
context of their use. By default, FbTerm treats them as
narrow width characters, option
&quot;<i>ambiguous-wide</i>&quot; may be used to change the
behavior.</p>

<h2>BACKGROUND IMAGE
<a name="BACKGROUND IMAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">FbTerm
doesn&rsquo;t load and parse any image file with various
formats directly, instead it takes a screen shot of frame
buffer device on startup if variable
<i>FBTERM_BACKGROUND_IMAGE</i> is defined, then uses this
screen shot as the background for text rendering. In order
to enable background image support, user should first put a
image to frame buffer device with a image viewer. A wrapper
script using fbv is listed below:</p>


<p style="margin-left:11%; margin-top: 1em"><b>#!/bin/bash</b></p>

<p style="margin-left:11%; margin-top: 1em"><b># fbterm-bi:
a wrapper script to enable background image with fbterm <br>
# usage: fbterm-bi /path/to/image fbterm-options</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>echo -ne
&quot;\e[?25l&quot; # hide cursor</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>fbv -ciuker
&quot;$1&quot; &lt;&lt; EOF <br>
q <br>
EOF</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>shift <br>
export FBTERM_BACKGROUND_IMAGE=1 <br>
exec fbterm &quot;$@&quot;</b></p>

<p style="margin-left:11%; margin-top: 1em">Attention: 1)
do not enable background image on frame buffer device with
8bpp depth, because FbTerm changes color map table for
correct text rendering; 2) if the screen shot is different
from the original image, try to use a fast scrolling
disabled frame buffer device.</p>

<h2>256 COLOR EXTENSION
<a name="256 COLOR EXTENSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">FbTerm supports
xterm&rsquo;s 256 color mode extension. The first 16 colors
are the default terminal colors. Additionally, there&rsquo;s
a 6x6x6 color cube, and 24 grayscale tones. But
xterm&rsquo;s 256 color escape sequences conflict with the
linux sequences implemented by FbTerm, so private escape
sequences were introduced to support this feature:</p>

<p style="margin-left:11%; margin-top: 1em"><b>ESC [ 1 ; n
} set foreground color to n (0 - 255) <br>
ESC [ 2 ; n } set background color to n (0 - 255) <br>
ESC [ 3 ; n ; r ; g ; b } set color n to (r, g, b) , n, r,
g, b all in (0 - 255)</b></p>

<p style="margin-left:11%; margin-top: 1em">A new terminfo
database entry named &quot;fbterm&quot; was added to use
these private sequences, all program based on terminfo
should work with it. By default, FbTerm sets environment
variable &quot;TERM&quot; to value &quot;fbterm&quot;.
Alternatively, the &quot;TERM&quot; variable can be set to
&quot;linux&quot;, in which case the 256 color mode will be
unavailable.</p>

<h2>INPUT METHOD
<a name="INPUT METHOD"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Instead of
adding input method directly in FbTerm, a client-server
based input method framework is designed to do this work.
FbTerm acts as a client, standalone IM program as a server,
and they run in separated processes.</p>

<p style="margin-left:11%; margin-top: 1em">As a normal IM
user, you should install a IM program written for FbTerm,
and specify it as the value of option
&quot;<i>input-method</i>&quot;. CTRL_SPACE is the shortcut
to activate/deactivate input method. And CTRL_ALT_K may be
used to kill the IM program when it has freezed.</p>

<h2>SECURITY NOTES
<a name="SECURITY NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">FbTerm tries to
change linux kernel key map table to setup shortcuts, which
requires <i>SYS_TTY_CONFIG</i> capability since kernel
version 2.6.15. It means FbTerm should be a setuid 0 program
to allow non-root users to use shortcuts. FbTerm only
switches to root privilege temporarily when changing key map
table, we believe it&rsquo;s pretty much free from security
problems. If you really don&rsquo;t like this and have a
linux kernel with file system capabilities enabled, which
allow user to give binaries a subset of root&rsquo;s powers
without using setuid 0 (official kernel 2.6.27 includes it),
you can run command &quot;<b>sudo setcap
&rsquo;cap_sys_tty_config+ep&rsquo;
/path/to/fbterm</b>&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">FbTerm
redirects /dev/tty0 output to the pseudo terminal of current
sub-window. In linux before version 2.6.10, anybody can do
this as long as the output was not redirected yet; since
version 2.6.10, only root or a process with the
<i>CAP_SYS_ADMIN</i> capability may do this. You should do
similar work with above ones for FbTerm to enable this
feature for non-root users.</p>

<h2>PERFORMANCE
<a name="PERFORMANCE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">According test
result, FbTerm spends more than 95% time on painting screen.
Speedup painting will significantly increase performance.
Here are some suggestions for frame buffer device:</p>

<p style="margin-left:11%; margin-top: 1em">* Enable fast
scrolling on frame buffer device. The visible screen will be
just a window of the video memory, when scrolling, FbTerm
only change the start of window, no need to repaint the
whole screen.</p>

<p style="margin-left:11%; margin-top: 1em">* On Intel P6
family processors the Memory Type Range Registers (MTRRs)
may be used to control processor access to memory ranges. If
you have video card on a PCI or AGP bus, enabling
write-combining allows bus write transfers to be combined
into a larger transfer before bursting over the PCI/AGP bus.
This can increase performance of FbTerm&rsquo;s paint
operations.</p>

<p style="margin-left:11%; margin-top: 1em">Maybe you need
to enable them manually for your video card. For example, by
default fast scrolling and write-combining are all disabled
on general VESA frame buffer device, GRUB/LILO configure
file should be modified to enable them. A GRUB example is
showed below:</p>

<p style="margin-left:11%; margin-top: 1em">title Ubuntu
<br>
root (hd0,0) <br>
kernel /boot/vmlinuz ro root=LABEL=UBUNTU splash vga=0x317
<b>video=vesafb:ywrap,mtrr:3</b> <br>
initrd /boot/initrd.img</p>

<p style="margin-left:11%; margin-top: 1em">You may check
fast scrolling status with &quot;<b>fbterm -v</b>&quot;, a
message with &quot;scrolling: redraw&quot; means fast
scrolling is disabled, otherwise enabled.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Written by
dragchan.</p>

<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Please submit
bug reports to
&lt;<b>http://code.google.com/p/fbterm/issues</b>&gt;.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
&copy; 2008-2010 dragchan. License GPLv2: GNU GPL version 2
or later &lt;http://gnu.org/licenses/gpl.html&gt;. <br>
This is free software: you are free to change and
redistribute it. There is NO WARRANTY, to the extent
permitted by law.</p>
<hr>
</body>
</html>
